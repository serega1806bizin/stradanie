import express from 'express';
import fs from 'fs';
import cors from 'cors';
import path from 'path';
import multer from 'multer';

const app = express();
const PORT = process.env.PORT || 8080;

const filePathTests = path.resolve('tests.json'); // –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
const filePathAnswers = path.resolve('answers.json'); // –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å

app.use(cors());
app.use(express.json());

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º __dirname –¥–ª—è ES-–º–æ–¥—É–ª–µ–π
const __dirname = path.dirname(new URL(import.meta.url).pathname);
// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫
const uploadDir = path.join(__dirname, 'uploads');
if (!fs.existsSync(uploadDir)) {
  fs.mkdirSync(uploadDir, { recursive: true });
}

// –û—Ç–¥–∞—ë–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ uploads
app.use('/uploads', express.static(uploadDir));

// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º multer —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, uploadDir);
  },
 filename: (req, file, cb) => {
  const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1e9);
  cb(null, uniqueSuffix + '-' + file.originalname);
},

});

const upload = multer({ storage });

// –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
// –û–∂–∏–¥–∞–µ—Ç—Å—è, —á—Ç–æ –≤ multipart/form-data –ø–µ—Ä–µ–¥–∞–Ω—ã: 
// - –ø–æ–ª–µ questionId (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∞)
// - —Ñ–∞–π–ª—ã –≤ –ø–æ–ª–µ "images" (–¥–æ 8 —Ñ–∞–π–ª–æ–≤)
app.post('/upload', upload.array('images', 8), (req, res) => {
  const files = req.files;
  if (!files || files.length === 0) {
    return res.status(400).send('–§–∞–π–ª—ã –Ω–µ –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.');
  }
  // –§–æ—Ä–º–∏—Ä—É–µ–º URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
  const fileUrls = files.map(file => `${req.protocol}://${req.get('host')}/uploads/${file.filename}`);
  res.status(200).json({ urls: fileUrls });
});
// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –ø–∞—Ä (x1, x2) —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞
function pairsEqual(pair1, pair2) {
  // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ pair1 –∏ pair2 ‚Äî —ç—Ç–æ [x1, x2] –∏–ª–∏ {x1, x2}.
  // –ï—Å–ª–∏ —É –≤–∞—Å —Ç–æ—á–Ω–æ –º–∞—Å—Å–∏–≤—ã, —É–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É.
  const [a1, a2] = Array.isArray(pair1) ? pair1 : [pair1.x1, pair1.x2];
  const [b1, b2] = Array.isArray(pair2) ? pair2 : [pair2.x1, pair2.x2];

  // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–∞–∫ —á–∏—Å–ª–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –ø–æ—Ä—è–¥–æ–∫
  return (
    (Number(a1) === Number(b1) && Number(a2) === Number(b2)) ||
    (Number(a1) === Number(b2) && Number(a2) === Number(b1))
  );
}

const calculateScore = (test, studentAnswers) => {
  let totalScore = 0;
  const variant = Number(studentAnswers.variant);

  console.log(`üìå –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –±–∞–ª—ñ–≤ –¥–ª—è: ${studentAnswers.student} (–í–∞—Ä—ñ–∞–Ω—Ç ${variant})`);

  test.questions.forEach(question => {
    const studentAnswer = studentAnswers.answers.find(ans => Number(ans["question-id"]) === Number(question.id));
    if (!studentAnswer) {
      console.log(`üö´ –ü–∏—Ç–∞–Ω–Ω—è ${question.id} (${question.text}) ‚Äî ‚ùå –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ–º–∞—î`);
      return;
    }

    const correctAnswer = question.answersByVariant?.[variant];
    if (correctAnswer === undefined) {
      console.log(`‚ùå –ù–µ–º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è –≤–∞—Ä—ñ–∞–Ω—Ç—É ${variant} —É –ø–∏—Ç–∞–Ω–Ω—ñ ${question.id}`);
      return;
    }

    let earnedPoints = 0;
    const maxPoints = question.points;

    console.log(`\nüîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: ${question.text} (–¢–∏–ø: ${question.type})`);
    console.log(`‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:`, correctAnswer);
    console.log(`üìù –í—ñ–¥–ø–æ–≤—ñ–¥—å —Å—Ç—É–¥–µ–Ω—Ç–∞:`, studentAnswer.answer);

    switch (question.type) {
      case "text":
        if (
          typeof studentAnswer.answer === "string" &&
          typeof correctAnswer === "string" &&
          studentAnswer.answer.trim().toLowerCase() === correctAnswer.trim().toLowerCase()
        ) {
          earnedPoints = maxPoints;
        }
        break;

      case "number":
        if (Number(studentAnswer.answer) === Number(correctAnswer)) {
          earnedPoints = maxPoints;
        }
        break;

      case "list-num":
        if (correctAnswer.consistencyImportant) {
          let correctCount = 0;
          correctAnswer.massiv.forEach((num, i) => {
            if (studentAnswer.answer[i] === num) correctCount++;
          });
          earnedPoints = (correctCount / correctAnswer.massiv.length) * maxPoints;
        } else {
          const correctSet = new Set(correctAnswer.massiv);
          const studentSet = new Set(studentAnswer.answer);
          const correctCount = [...studentSet].filter(num => correctSet.has(num)).length;
          earnedPoints = (correctCount / correctAnswer.massiv.length) * maxPoints;
        }
        break;

      case "matrix":
        const correctMatrix = JSON.stringify(correctAnswer);
        const studentMatrix = JSON.stringify(studentAnswer.answer.answer);
        if (correctMatrix === studentMatrix) {
          earnedPoints = maxPoints;
        } else {
          let correctCount = 0;
          const totalElements = correctAnswer.flat().length;
          correctAnswer.forEach((row, i) => {
            row.forEach((num, j) => {
              if (studentAnswer.answer.answer[i] && studentAnswer.answer.answer[i][j] === num) {
                correctCount++;
              }
            });
          });
          earnedPoints = (correctCount / totalElements) * maxPoints;
        }
        break;

      case "variants":
        if (JSON.stringify(studentAnswer.answer) === JSON.stringify(correctAnswer.correct)) {
          earnedPoints = maxPoints;
        }
        break;

      case "list-reber":
        const correctEdges = correctAnswer;
        const studentEdges = studentAnswer.answer.answer || [];

        let correctCount = 0;
        correctEdges.forEach(correctEdge => {
          const found = studentEdges.some(studentEdge => pairsEqual(correctEdge, studentEdge));
          if (found) correctCount++;
        });

        earnedPoints = (correctCount / correctEdges.length) * maxPoints;
        break;

      case "list-pars":
        const correctPairs = correctAnswer.pairs;
        const studentPairs = studentAnswer.answer.answer || [];

        let matchCount = 0;
        correctPairs.forEach(pair => {
          if (studentPairs.some(p => p[0] === pair[0] && p[1] === pair[1])) {
            matchCount++;
          }
        });

        earnedPoints = (matchCount / correctPairs.length) * maxPoints;
        break;

      default:
        console.warn(`‚ö†Ô∏è –ù–µ–≤—ñ–¥–æ–º–∏–π —Ç–∏–ø –ø–∏—Ç–∞–Ω–Ω—è: ${question.type}`);
    }

    console.log(`üèÖ –ù–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ –±–∞–ª—ñ–≤: ${Math.round(earnedPoints)} –∑ ${maxPoints}`);
    totalScore += Math.round(earnedPoints);
  });

  console.log(`‚úÖ –ü—ñ–¥—Å—É–º–∫–æ–≤–∏–π –±–∞–ª: ${totalScore}`);
  return totalScore;
};



// –§—É–Ω–∫—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è JSON
const readData = (filePath) => {
    try {
        if (!fs.existsSync(filePath)) return [];
        const content = fs.readFileSync(filePath, 'utf8');
        return JSON.parse(content) || [];
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞:', error);
        return [];
    }
};

// ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ –ø–æ id
app.put('/api/tests/:id', (req, res) => {
  const testId = Number(req.params.id);
  const tests = readData(filePathTests);
  const index = tests.findIndex(test => test.id === testId);
  if (index === -1) {
    return res.status(404).json({ error: '–¢–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω' });
  }

  const oldTest = tests[index];

  // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ç–µ—Å—Ç–∞, –æ–±—ä–µ–¥–∏–Ω—è—è —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –Ω–æ–≤—ã–º–∏ –∏–∑ req.body
  const newTest = {
    ...oldTest,
    ...req.body,
    id: testId,
    lastUpdated: Date.now(), // –ø–æ–∑–Ω–∞—á–∞—î–º–æ, –∫–æ–ª–∏ —Ç–µ—Å—Ç –≤–æ—Å—Ç–∞–Ω–Ω—î —Ä–µ–¥–∞–≥—É–≤–∞–≤—Å—è
  };
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∞ –≤—Å–µ—Ö URL –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ—Å—Ç–∞
  const gatherAllImages = (testObj) => {
    let urls = [];
    if (testObj.questions && Array.isArray(testObj.questions)) {
      testObj.questions.forEach(q => {
        if (q.Images && Array.isArray(q.Images)) {
          urls = urls.concat(q.Images);
        }
      });
    }
    return urls;
  };

  const oldImages = gatherAllImages(oldTest);
  const newImages = gatherAllImages(newTest);

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–µ URL (—Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏)
  const removedImages = oldImages.filter(url => !newImages.includes(url));
  console.log('Removed images:', removedImages);

  // –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª—ã —Å –¥–∏—Å–∫–∞
  removedImages.forEach(url => {
    try {
      const fileName = path.basename(url);
      const fullPath = path.join(uploadDir, fileName);
      if (fs.existsSync(fullPath)) {
        fs.unlinkSync(fullPath);
        console.log(`–§–∞–π–ª ${fileName} —É–¥–∞–ª—ë–Ω`);
      } else {
        console.log(`–§–∞–π–ª ${fileName} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞:', error);
    }
  });

  // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ—Å—Ç—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
  tests[index] = newTest;
  writeData(tests, filePathTests);
  res.json(newTest);
});


// ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
app.post('/submit', (req, res) => {
  const answerData = req.body;

  const tests = readData(filePathTests);
  const test = tests.find(t => t.id === answerData["id-test"]);

  if (!test) {
    return res.status(404).json({ error: "–¢–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω" });
  }

  // ‚úÖ –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ –Ω–∞ –±—ç–∫–µ
  answerData.mark = calculateScore(test, answerData);
  answerData.timestamp = Date.now(); // –î–æ–¥–∞—î–º–æ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

  const answers = readData(filePathAnswers);
  answers.unshift(answerData);
  writeData(answers, filePathAnswers);

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ç–µ—Å—Ç–µ
  const testIndex = tests.findIndex(t => t.id === answerData["id-test"]);
  tests[testIndex].progress = (tests[testIndex].progress || 0) + 1;
  writeData(tests, filePathTests);

  res.status(200).json({
    message: "–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—ë–Ω, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –æ—Ü–µ–Ω–∫–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞!",
    updatedTest: tests[testIndex],
    mark: answerData.mark,
  });
});


// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ id-answer
app.get('/api/answers/answer/:idAnswer', (req, res) => {
    const idAnswer = Number(req.params.idAnswer); // –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ id –∫ —á–∏—Å–ª—É
    const answers = readData(filePathAnswers);

    const answer = answers.find(ans => ans["id-answer"] === idAnswer);

    if (!answer) {
        return res.status(404).json({ error: '–û—Ç–≤–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω' });
    }

    res.json(answer);
});


// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤
app.get('/api/answers', (req, res) => {
  const answers = readData(filePathAnswers);
  res.json(answers);
});

// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ ID —Ç–µ—Å—Ç–∞
app.get('/api/answers/:idTest', (req, res) => {
    const idTest = Number(req.params.idTest); // –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —á–∏—Å–ª—É
    const answers = readData(filePathAnswers);

    // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –æ—Ç–≤–µ—Ç—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–≤–ø–∞–¥–∞–µ—Ç id-test
    const filteredAnswers = answers.filter(answer => answer["id-test"] === idTest);

    if (filteredAnswers.length === 0) {
        return res.status(404).json({ error: '–û—Ç–≤–µ—Ç—ã –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã' });
    }

    res.json(filteredAnswers);
});



// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø–æ ID (—É–ª—É—á—à–µ–Ω–æ)
app.get('/api/tests/:id', (req, res) => {
  const testId = Number(req.params.id); // –ß–∏—Å–ª–æ–≤–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ

  const tests = readData(filePathTests);
  const test = tests.find((t) => t.id === testId);

  if (!test) {
      return res.status(404).json({ error: '–¢–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω' });
  }

  res.json(test);
});

// –§—É–Ω–∫—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–∞–ø–∏—Å–∏ JSON
const writeData = (data, filePath) => {
    try {
        fs.writeFileSync(filePath, JSON.stringify(data, null, 2));
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–∞:', error);
    }
};

// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
app.get('/api/tests', (req, res) => {
    const data = readData(filePathTests);
    res.json(data);
});


// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞
app.post('/api/tests', (req, res) => {
    const data = readData(filePathTests);
    const newTest = { id: Date.now(), ...req.body };

    data.push(newTest);
    writeData(data, filePathTests);

    res.status(201).json(newTest);
});

// ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ –ø–æ id –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
app.delete('/api/tests/:id', (req, res) => {
  const { id } = req.params;
  const testId = Number(id);

  // –ß–∏—Ç–∞—î–º–æ –ø–æ—Ç–æ—á–Ω—ñ —Ç–µ—Å—Ç–∏
  let tests = readData(filePathTests);
  const testToDelete = tests.find(test => test.id === testId);

  if (!testToDelete) {
    return res.status(404).json({ error: '–¢–µ—Å—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ' });
  }

  // üñºÔ∏è –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω—ñ –¥–æ —Ü—å–æ–≥–æ —Ç–µ—Å—Ç—É
  const gatherAllImages = (testObj) => {
    let urls = [];
    if (testObj.questions && Array.isArray(testObj.questions)) {
      testObj.questions.forEach(q => {
        if (q.Images && Array.isArray(q.Images)) {
          urls = urls.concat(q.Images);
        }
      });
    }
    return urls;
  };

  const allImages = gatherAllImages(testToDelete);

  // üßπ –í–∏–¥–∞–ª—è—î–º–æ —Ü—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ –¥–∏—Å–∫—É
  allImages.forEach(url => {
    try {
      const fileName = path.basename(url);
      const fullPath = path.join(uploadDir, fileName);
      if (fs.existsSync(fullPath)) {
        fs.unlinkSync(fullPath);
        console.log(`üóëÔ∏è –í–∏–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª: ${fileName}`);
      } else {
        console.log(`‚ö†Ô∏è –§–∞–π–ª ${fileName} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ`);
      }
    } catch (error) {
      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:', error);
    }
  });

  // –û–Ω–æ–≤–ª—é—î–º–æ —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç—ñ–≤
  const newTests = tests.filter(test => test.id !== testId);
  writeData(newTests, filePathTests);

  // –í–∏–¥–∞–ª—è—î–º–æ –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  let answers = readData(filePathAnswers);
  const newAnswers = answers.filter(answer => answer["id-test"] !== testId);
  if (answers.length !== newAnswers.length) {
    writeData(newAnswers, filePathAnswers);
  }

  res.json({ message: '–¢–µ—Å—Ç, –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–æ' });
});


// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
app.listen(PORT, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${PORT}`);
});
